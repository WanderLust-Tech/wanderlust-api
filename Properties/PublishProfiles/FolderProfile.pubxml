<?xml version="1.0" encoding="utf-8"?>
<!--
Folder Publishing Profile - Publishes to a local folder for manual deployment
-->
<Project ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <PropertyGroup>
    <WebPublishMethod>FileSystem</WebPublishMethod>
    <LastUsedBuildConfiguration>Release</LastUsedBuildConfiguration>
    <LastUsedPlatform>Any CPU</LastUsedPlatform>
    <SiteUrlToLaunchAfterPublish />
    <LaunchSiteAfterPublish>False</LaunchSiteAfterPublish>
    <ExcludeApp_Data>False</ExcludeApp_Data>
    <ProjectGuid>$(ProjectGuid)</ProjectGuid>
    <PublishUrl>bin\Release\net8.0\publish</PublishUrl>
    <DeleteExistingFiles>True</DeleteExistingFiles>
    <TargetFramework>net8.0</TargetFramework>
    <RuntimeIdentifier>win-x64</RuntimeIdentifier>
    <SelfContained>false</SelfContained>
    <PublishSingleFile>false</PublishSingleFile>
    <PublishReadyToRun>true</PublishReadyToRun>
    <PublishTrimmed>false</PublishTrimmed>
    <EnvironmentName>Production</EnvironmentName>
  </PropertyGroup>
  
  <!-- Exclude development files -->
  <ItemGroup>
    <Content Remove="appsettings.Development.json" />
    <Content Remove="**/*.pdb" />
    <Content Remove="**/*.xml" />
  </ItemGroup>
  
  <!-- Include production web.config -->
  <PropertyGroup>
    <PublishWithAspNetCoreTargetManifest>false</PublishWithAspNetCoreTargetManifest>
  </PropertyGroup>
  
  <!-- Post-publish: Create deployment package info -->
  <Target Name="CreateDeploymentInfo" AfterTargets="PublishFiles">
    <ItemGroup>
      <DeploymentInfo Include="Deployment created at: $([System.DateTime]::Now)" />
      <DeploymentInfo Include="Configuration: $(Configuration)" />
      <DeploymentInfo Include="Target Framework: $(TargetFramework)" />
      <DeploymentInfo Include="Runtime: $(RuntimeIdentifier)" />
    </ItemGroup>
    <WriteLinesToFile File="$(PublishUrl)\deployment-info.txt" Lines="@(DeploymentInfo)" Overwrite="true" />
    <Message Text="âœ… Deployment package created at: $(PublishUrl)" Importance="high" />
  </Target>
</Project>
